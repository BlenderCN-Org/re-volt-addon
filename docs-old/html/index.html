<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Re-Volt Add-On Documentation</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="pandoc.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">Re-Volt Add-On Documentation</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#download">Download</a></li>
<li><a href="#known-issues">Known Issues</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#tools-panel">Tools Panel</a><ul>
<li><a href="#importexport">Import/Export</a></li>
<li><a href="#helpers">Helpers</a><ul>
<li><a href="#d-view">3D View</a></li>
</ul></li>
<li><a href="#add-on-settings">Add-On Settings</a><ul>
<li><a href="#general-settings">General Settings</a></li>
<li><a href="#import-settings">Import Settings</a></li>
<li><a href="#export-settings">Export Settings</a></li>
<li><a href="#export-prm-.prm.m">Export PRM (.prm/.m)</a></li>
<li><a href="#import-world-.w">Import World (.w)</a></li>
<li><a href="#export-collision-.ncp">Export Collision (.ncp)</a></li>
</ul></li>
<li><a href="#light-and-shadow">Light and Shadow</a><ul>
<li><a href="#shade-object">Shade Object</a></li>
<li><a href="#generate-shadow-texture">Generate Shadow Texture</a></li>
</ul></li>
<li><a href="#instances">Instances</a></li>
<li><a href="#face-properties">Face Properties</a></li>
<li><a href="#vertex-colors">Vertex Colors</a></li>
<li><a href="#texture-animation">Texture Animation</a><ul>
<li><a href="#animation-slots">Animation Slots</a></li>
<li><a href="#animate">Animate</a></li>
<li><a href="#uv">UV</a></li>
</ul></li>
</ul></li>
<li><a href="#properties">Properties</a><ul>
<li><a href="#object-properties">Object Properties</a></li>
<li><a href="#scene-properties">Scene Properties</a></li>
<li><a href="#mesh-properties">Mesh Properties</a><ul>
<li><a href="#vertex-colors-1">Vertex Colors</a></li>
</ul></li>
</ul></li>
<li><a href="#importexport-specifications">Import/Export Specifications</a></li>
</ul>
</nav>
<h2 id="download">Download</h2>
<p><span style="float: left; margin: 1em 2em;"><img src="rva_small.png" /></span></p>
<p>This is the documentation for Marv’s Add-On for Re-Volt files.<br />
It is intended to be used with <a href="https://www.blender.org/download/"><strong>Blender 2.79b</strong></a> or newer.</p>
<p><a href="https://github.com/Yethiel/re-volt-addon/releases/tag/rva_18.0619"><strong>Download</strong> (rva_18.0619)</a></p>
<p><a href="http://learn.re-volt.io">Tutorial</a><br />
<a href="http://learn.re-volt.io/tracks-blender/resources">Resources</a> (Animations, textures, etc.)</p>
<hr />
<h2 id="known-issues">Known Issues</h2>
<p>Please report Bugs and suggest features on <a href="https://github.com/Yethiel/re-volt-addon/issues">GitHub</a>.</p>
<hr />
<h2 id="installation">Installation</h2>
<p>To install the add-on, locate the <code>addons</code> folder within your Blender folder.</p>
<p>In most cases, it is located at <code>C:\Program Files\Blender Foundation\Blender\2.79\scripts\addons</code>.</p>
<p>If you’re on Linux, your add-on folder might be located at <code>~/.config/blender/2.79/scripts/addons/</code>, where <code>2.79</code> is the <strong>Blender version you are using</strong>.</p>
<p>Extract the <code>io_revolt</code> folder into the addons folder.</p>
<figure>
<img src="addon_path.png" alt="Installation Path" /><figcaption>Installation Path</figcaption>
</figure>
<p>Now start up Blender and open the user preferences (File -&gt; User Preferences…). Click on the <strong>Add-ons</strong> tab and enter <em>Re-Volt</em>.</p>
<figure>
<img src="user_preferences.png" alt="User Preferences" /><figcaption>User Preferences</figcaption>
</figure>
<p><strong>Tip:</strong> Now, click on <strong>Save User Settings</strong> at the bottom of the User Preferences window to keep the add-on enabled when you restart Blender.</p>
<hr />
<h2 id="tools-panel">Tools Panel</h2>
<p>The panel located on the left hand side of the 3D view.<br />
Open/Close the tools panel using <code>T</code>.<br />
The following panels are located in the Re-Volt tab. Its contents depend on the edit mode.<br />
Some panels are collapsed by default. They can be expanded by clicking on the triangle on the left side of their header.</p>
<hr />
<h3 id="importexport">Import/Export</h3>
<p>There are two main buttons, one for import and one for export. They have the same functions as the menu entries in the File -&gt; Import/Export menus.<br />
Import and Export settings can be found right beneath the buttons.</p>
<p>A <em>repeat</em> button can be found next to the <em>Export</em> button which repeats the last export.</p>
<hr />
<h3 id="helpers">Helpers</h3>
<h4 id="d-view">3D View</h4>
<p><strong>Texture</strong>:<br />
Enables texture mode.</p>
<p><strong>Textured Solid</strong>:<br />
Enables solid shading mode and enables the textured solid option. This might be better for working with only half-textured models.</p>
<hr />
<h3 id="add-on-settings">Add-On Settings</h3>
<p>These settings can also be found when importing/exporting files in the bottom left.</p>
<h4 id="general-settings">General Settings</h4>
<p><strong>Prefer Textured Solid Mode</strong>:<br />
There are two encouraged ways to view textured meshes: Texture mode and Solid mode with <em>Textured Solid</em> shading enabled.</p>
<p>If this setting is enabled, the add-on will switch to Textured Solid mode instead of Texture mode.<br />
In Textured Solid mode, objects have additional shading which makes white and untextured models a lot easier to work with.</p>
<h4 id="import-settings">Import Settings</h4>
<p><strong>Texture Mode after Import</strong>:<br />
Switches to texture display mode when a mesh has been imported (applies to .prm and .w).</p>
<h4 id="export-settings">Export Settings</h4>
<p><strong>Triangulate n-gons</strong>:<br />
Triangulates faces with more than 4 vertices (also called n-gons).<br />
This will only affect the exported object, the mesh itself will not be triangulated.<br />
Deselecting this might result in broken exports.</p>
<p><strong>Use Number for Textures</strong>:<br />
Instead of using the texture file to determine the texture number, the number set in the face properties panel will be used for exporting.</p>
<h4 id="export-prm-.prm.m">Export PRM (.prm/.m)</h4>
<p><strong>Apply Scale</strong>:<br />
Applies the scale of the object when exporting.</p>
<p><strong>Apply Rotation</strong>:<br />
Applies the rotation of the object when exporting.</p>
<h4 id="import-world-.w">Import World (.w)</h4>
<p><strong>Parent .w meshes to Empty</strong>:<br />
Creates an empty object with the imported file’s name and parents all meshes contained in the .w file to it. This makes the object outliner a lot less cluttered.</p>
<p><strong>Import Bound Boxes</strong>:<br />
Imports the bound box for every single mesh of the .w file.</p>
<p><strong>Import Cubes</strong>:<br />
Imports the cubes for every single mesh of the .w file.</p>
<p><strong>Import Big Cubes</strong>:<br />
Imports the big cubes surrounding multiple meshes of the .w file.</p>
<p><strong>* Import Layers</strong>:<br />
This option will be given as soon as one of the above debug settings have been enabled (boundary boxes, spheres and big cubes):<br />
Selector for the layer(s) the debug objects will be placed on. Multiple layers can be selected by <code>Shift</code>-clicking or dragging.<br />
By default, all objects will be imported to the first layer.</p>
<p>When imported, the actual meshes are going to be on the first layer while the debug objects potentially are on other layers.<br />
To view multiple layers at once, hold down <code>Shift</code> and press numbers, e.g. <code>1</code> and then <code>2</code>. While doing that, make sure the mouse cursor hovers over the 3D view.</p>
<h4 id="export-collision-.ncp">Export Collision (.ncp)</h4>
<p><strong>Only export selected</strong>:<br />
When this setting is enabled, only selected objects will be exported to the NCP. If only one object is selected, the location of the object will be ignored and the center of the NCP will be the center of the selected object (useful for exporting NCPs for single PRM files).</p>
<p><strong>Export Collision Grid (.w)</strong>:<br />
This setting is required when exporting a collision file that matches a .w file (e.g. nhood1.ncp for nhood1.w).<br />
NCP files can be exported without the collision grid if the .ncp is intended to be used with an object or instance (.prm).</p>
<p><strong>Grid Size</strong>:<br />
Defines the size of the lookup grid that is written to the end of the NCP file. The size defines the size of the single “cells”. Choosing a higher number will result in a faster export but poorer performance in-game.</p>
<hr />
<h3 id="light-and-shadow">Light and Shadow</h3>
<h4 id="shade-object">Shade Object</h4>
<p>Shades a mesh by baking light to the vertex color layer.</p>
<p><strong>Orientation</strong>:<br />
Sets the orientation of the lights. The following options are available:<br />
<strong>Z (Vertical)</strong>: Places lights above and beneath the selected object.<br />
<strong>Y (Horizontal)</strong>: Places lights in the front and the back of the selected object<br />
<strong>X (Horizontal)</strong>: Places lights on the left and right of the selected object.</p>
<p><strong>Direction</strong>:<br />
Shows where the lights will be placed, depending on the chosen orientation.</p>
<p><strong>Light</strong>:<br />
Three options: Hard (sun, more contrast), Soft (hemisphere, smoother) and None.<br />
The <strong>hard</strong> option emits light in a distinct direction (<a href="https://docs.blender.org/manual/de/dev/render/blender_render/lighting/lamps/sun/introduction.html">Blender docs</a>).<br />
The <strong>soft</strong> option emits light from a hemisphere which makes the model evenly lit (<a href="https://docs.blender.org/manual/de/dev/render/blender_render/lighting/lamps/hemi.html">Blender docs</a>).</p>
<p><strong>Intensity</strong>:<br />
This defines the intensity of the light sources. This is the same setting as the lamp’s energy.</p>
<h4 id="generate-shadow-texture">Generate Shadow Texture</h4>
<p>With this feature you can create shadows that are ready for use in-game. The shadows are negative which is a requirement by the game.<br />
The add-on creates the shadows with ray-tracing and then baking them to an automatically sized textured plane (takes child objects into account).<br />
To save the shadows, go into the UV/Image Editor, select the shadow (most recenty try has the highest number, e.g. Shadow.420) and then click Image -&gt; Save as Image.</p>
<p><strong>Warning</strong>: Start with low-quality settings first as Blender might hang a while during the creation of a shadow. If it appears to freeze, wait a few minutes. Depending on the settings you chose, it might take a while.</p>
<p><strong>Method</strong>:<br />
There are two options:<br />
<em>Default</em> (Adaptive QMC), which is the faster option. I recommend this for testing the shadow settings.<br />
<em>High Quality</em> (Constant QMC), which is the slower and less-grainy option. I recommend using this when you’re done tweaking your shadow settings.</p>
<p><strong>Quality</strong>:<br />
The amount of samples the shadow is rendered with (number of samples taken extra).</p>
<p><strong>Softness</strong>:<br />
Light size for ray shadow sampling.</p>
<p><strong>Resolution</strong>:<br />
The resolution of the resulting texture (height and width).</p>
<p><strong>Table</strong>:<br />
Shadow coordinates for use in parameters.txt of cars. Click to select all, then CTRL C to copy.</p>
<hr />
<h3 id="instances">Instances</h3>
<p><strong>Instances</strong><br />
Shows the amount of instances in the current scene.</p>
<p><strong>Rename selected</strong><br />
Renames all selected objects to the name given in the text field: <code>example.prm, example.prm.001, example.002, ...</code></p>
<p><strong>Select by name</strong><br />
Selects all instances that contain the name given in the textu field.</p>
<p><strong>Mark as Instance</strong><br />
Assigns the instance property for all selected objects and makes Instance settings availabe in the Object properties (right panel).</p>
<p><strong>Remove Instance property</strong><br />
Removes the instance property.</p>
<p><strong>Bake all selected (Model RGB)</strong><br />
Bakes the light from the lamps in the current scene to the Model RGB property of selected objects. This allows to make instances blend in better if you’re working on a level with a specific light setup (night, sunset, etc.).</p>
<hr />
<h3 id="face-properties">Face Properties</h3>
<p>The list of properties is put together as follows:</p>
<p><strong>Checkbox</strong>:<br />
Enable or disable the property for all selected faces. The checkbox is checked when <em>all</em> selected faces have this property.</p>
<p><strong>Number</strong>:<br />
Indicates how many of the selected faces have this property.</p>
<p><strong>Property Name</strong>:<br />
Hover the property name to find out more about the property.</p>
<p><strong>Select (sel) button</strong>:<br />
Click to select/deselect all faces with this property.</p>
<p><strong>Texture</strong>:<br />
Sets the texture number for all selected faces. <code>-1</code> if numbers of selected faces don’t match.</p>
<p><strong>Material</strong>:<br />
<strong>Set</strong>: Displays the material of the currently selected face. Select a material from the list to apply it to all selected faces. The select (sel) button selects all faces with the same material.</p>
<p><strong>Select</strong>: Select a material from the list to select all faces with the same material.</p>
<hr />
<h3 id="vertex-colors">Vertex Colors</h3>
<p>Vertex colors will be set depending on the selection mode.<br />
Vertex, edge and face select modes (<code>CTRL</code> <code>TAB</code>) each have different effects.</p>
<p><strong>Color Wheel</strong>:<br />
An easy to access color selector to select the color hue and shade.<br />
The <em>Set Color</em> button sets the color to the selected faces.<br />
Click on the color preview to the left of the <em>Set Color</em> button to get a more detailed color wheel that supports RBG, HSV and Hex values and a color picker.<br />
<em>Get Color from active Face</em> copies the average vertex color of the active face to the color wheel.</p>
<p><strong>Shade buttons</strong>:<br />
These buttons can be used for easily shading a mesh. They range from black to white.</p>
<hr />
<h3 id="texture-animation">Texture Animation</h3>
<p>An edit panel for texture animations. The animations themselves are saved in the scene, not the selected object. It is only accessible in edit mode to provide tools to use existing polygons and UV mapping to create an animation.</p>
<p><strong>Total Slots</strong>:<br />
The total amount of texture animations you would like to use.<br />
For example, set this to <code>3</code> to use slots <code>0</code>, <code>1</code> and <code>2</code>.</p>
<p>The maximum amount is 10 since a polygon’s animation is determined by the texture number.</p>
<h4 id="animation-slots">Animation Slots</h4>
<p><strong>Slot</strong>:<br />
The animation slot to display in the panel. The actual animation is set by the texture number/page.</p>
<p><strong>Frames</strong>:<br />
The amount of frames you want to use for the animation. For example, set this to <code>32</code> in order to access frames <code>0</code> to <code>31</code>.</p>
<p><strong>Animation Frame</strong>:</p>
<p><strong>Frame</strong>:<br />
The frame to display in the panel.</p>
<p><strong>Preview</strong>:<br />
Click the Preview button to preview the frame’s UV on the currently selected face. The buttons next to it go back or advance one frame and then preview the UV of that frame on the currently selected face.</p>
<p><strong>Texture</strong>:<br />
The texture page number this animation frame uses.</p>
<p><strong>Duration</strong>:<br />
The duration of the frame or the delay until the next frame shows up.</p>
<h4 id="animate">Animate</h4>
<p>Functions for automatically generating animations.</p>
<p><strong>Transform Animation</strong>:</p>
<p>Interpolates the UV coordinates between two given frames. (Animates from point A to B.)</p>
<p><strong>Start Frame</strong>:<br />
The start frame the animation starts from. This frame will not be changed.</p>
<p><strong>End Frame</strong>:<br />
The frame the animation ends on. This frame will not be changed. To achieve a perfectly looping animation, it’s sometimes necessary to leave the last frame out. To do so, decrease the amount of frames of the animation by 1.</p>
<p><strong>Frame Duration</strong>:<br />
The duration of all resulting frames.</p>
<p><strong>Texture</strong>:<br />
The texture page applied to all resulting frames.</p>
<p><strong>Grid Animation</strong>:</p>
<p>Lays out animation frames on a grid, much like the mars animation in Museum 2.</p>
<p><strong>Start Frame</strong>:<br />
The frame the animation starts at.</p>
<p><strong>X Resolution</strong>:<br />
The width of the grid.</p>
<p><strong>Y Resolution</strong>:<br />
The height of the grid.</p>
<p><strong>Frame Duration</strong>:<br />
The duration of all resulting frames.</p>
<p><strong>Texture</strong>:<br />
The texture page applied to all resulting frames.</p>
<h4 id="uv">UV</h4>
<p><strong>UV to Frame</strong>:<br />
Takes the UV coordinates of the currently selected face and applies them to the texture animation frame.</p>
<p><strong>Coordinates</strong>:<br />
The UV mapping for the currently displayed frame. For triangular faces, UV3 will be ignored.</p>
<hr />
<h2 id="properties">Properties</h2>
<h3 id="object-properties">Object Properties</h3>
<p>This panel is at the far bottom of the Object section of the object properties. You may use the right top edge to drag it further up. Some properties from Blender are used as well, such as vertex colors. Vertex color layers can be found in the object data section (symbol with three dots).</p>
<p><strong>Big Cube Properties</strong>:<br />
This only shows when a big cube is selected.</p>
<p><strong>Mesh Indices</strong>:<br />
A list of mesh indices the selected big cubes belongs to. Does not affect export.</p>
<h3 id="scene-properties">Scene Properties</h3>
<p><strong>Re-Volt .w Properties</strong>:<br />
This panel is at the far bottom of the Scene section of the Properties editor. You may use the right top edge to drag it further up.</p>
<p><strong>Texture Animations</strong>:<br />
Texture animation dictionaries for .w files saved as a string. This property can be edited with the texture animation panel in edit mode.</p>
<h3 id="mesh-properties">Mesh Properties</h3>
<h4 id="vertex-colors-1">Vertex Colors</h4>
<p>Generally, meshes can have the following vertex color layers:</p>
<p><strong>Col</strong>: The color/shade<br />
<strong>Alpha</strong>: The translucency of the vertex/polygon. White is completely opaque (visible), black is completely transparent (invisible). This layer will only be used if the <em>translucent</em> flag is set in the face properties.<br />
<strong>Env</strong>: The environment color (reflection). This layer is used for meshes and polygons of .w files. The env flag needs to be set in order for faces to use it.</p>
<hr />
<h2 id="importexport-specifications">Import/Export Specifications</h2>
<p><strong>Importing Files</strong>:<br />
Re-Volt files can be imported via the File menu (File -&gt; Import -&gt; Re-Volt).<br />
There also is a button in the Re-Volt tab of the tool shelf of the 3D view.</p>
<p><strong>PRM</strong>:<br />
<strong>Mesh Data</strong>:<br />
<strong>Import</strong>:<br />
An object with the mesh will be linked to the current scene. Meshes consist of quads and tris.</p>
<p><strong>Export</strong>:<br />
N-gons will be triangulate by default. This can be disabled in the export settings.</p>
<p><strong>UV Map</strong>:<br />
<strong>Export</strong>:<br />
The UV map of the mesh can be found on the default UV layer (UVMap).</p>
<p><strong>Export</strong>:<br />
Only the uv map called <em>UVMap</em> will be exported.</p>
<p><strong>Vertex Colors</strong>:<br />
<strong>Import</strong>:<br />
The vertex colors can be found on the Col and Alpha layers.<br />
On the alpha channel, white is fully transparent while black is opaque.</p>
<p><strong>Export</strong>:<br />
Only the layers <em>Col</em> and <em>Alpha</em> will be exported.</p>
<p><strong>Level of Detail (LOD)</strong>:<br />
<strong>Import</strong>:<br />
If a PRM file includes mulitple meshes, all of them will be imported.<br />
A suffix will be appended to the mesh name (“|q0” is the highest quality, “|q3 is a lower quality”).<br />
A fake user will be assigned to them so they’re not lost when saving the file.</p>
<p><strong>Textures</strong>:<br />
<strong>Import</strong>:<br />
If the imported mesh is a car mesh, the texture path will be taken from the parameters.txt. If it’s a level file, the texture name will be generated from the polygon’s texture number and taken from the level folder. If a texture file cannot be found, a 512x512 dummy texture will be generated. If a texture with the same name already exist, it will be used instead.</p>
<p>The texture number is also written onto a bmesh integer layer. This layer can be used instead of the texture on the tex layer for exporting.</p>
<p><strong>Export</strong>:<br />
To set the texture using this number layer, the <em>Use Number for Textures</em> setting has to be set in the export settings.<br />
When exporting, the texture number will be taken from the layer instead of being determined by the texture file assigned to the face.</p>
<p>If there is no texture present on a face, texture page 0 (A) will be used. If you actually want to export a mesh without a texture, enable the <em>Use Number for Textures</em> and set the number to <code>-1</code>.</p>
<p><strong>Face Type</strong>:</p>
<p><strong>Import</strong>:<br />
The face types can be accessed with the Mesh properties which each have setter and getter functions that operate on int layers via bmesh.<br />
The face type layer is called “Type”. There is a Re-Volt tab in the Tool panel of the 3D view that allows users to set face properties in Edit mode.</p>
<p><strong>Export</strong>:<br />
All selected face type properties will be set when exporting.</p>
<p><strong>World (.w)</strong>:<br />
<strong>Import</strong>:</p>
<p><strong>Meshes</strong>:</p>
<p>See PRM. The only addition is the environment color list that defines a specularity color for certain polygons if the flag is enabled for them.</p>
<p>The environment color is accessible on a vertex color layer called <em>Env</em>. The alpha value of the color is only accessible via the face property editing panel since it’s written to a per-face float layer (<em>EnvAlpha</em>).</p>
<p>Do note that environment colors are per-polygon. The average color will be sampled from the vertex color layer when an env-enabled polygon is selected.</p>
<p><strong>Texture Animation</strong>:<br />
Animations are stored in a dictionary that can be accessed in the <em>Properties</em> editor (<em>Scene</em> section).</p>
<p><strong>Debug</strong>:<br />
Bounding boxes, bounding spheres and “big cubes” (spheres) can be imported to selected layers. They are for debug purposes only and they will not affect the export in any way.</p>
<p><strong>Export</strong>:</p>
<p>Nothing noteworthy. Exports files the way they have been imported.</p>
<p><strong>NCP (Collision)</strong>:</p>
<p><strong>Import</strong>:</p>
<p>NCP flags and materials are written to the integer layers “NCPFlags” and “Material”. A preview color for the materials is written to the “NCPPreview” vertex color channel.</p>
<p><strong>Export</strong>:</p>
<p>All objects of the scene will be merged into one mesh and then exported to the file. Objects will be ignored if they’re a debug object or have the <em>ignore</em> object property set (Properties Editor).<br />
Faces that have the material <code>NONE</code> assigned to them will not be exported.<br />
The vertex color layer called “NCPPreview” will be ignored since it’s only for previewing purposes.</p>
<p>A lookup grid will be automatically exported. This can be turned off in the export settings.</p>
<p><strong>parameters.txt (Car)</strong>:</p>
<p><strong>Import</strong>:<br />
The add-on currently imports the car’s body and wheels and their positions.<br />
If a wheel file cannot be found, it will be represented with an empty object.</p>
<hr />
<p><a href="http://re-volt.io">https://re-volt.io</a></p>
</body>
</html>
